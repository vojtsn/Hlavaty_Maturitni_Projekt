{% extends "base.html" %}

{% block title %}InfoBox – Domů{% endblock %}

{% block content %}
<div class="container">
  <h2 class="page-title">Nejnovější články</h2>

  {% if articles and articles|length > 0 %}
    <div class="articles">
      {% for a in articles %}
        <article class="article-card">
          <h3 class="article-title">
            <a href="{{ url_for('main.clanek_detail', article_id=a.id) }}">
                {{ a.title }}
            </a>

          </h3>


          <div class="article-meta">
            <span class="meta-item">
              {{ a.created_at.strftime('%d.%m.%Y %H:%M') if a.created_at else '' }}
            </span>
            <span class="meta-sep">•</span>
            <span class="meta-item">
              autor: {{ a.author.username if a.author else ('id ' ~ a.author_id) }}
            </span>
          </div>

          {% if a.perex %}
            <p class="article-perex">{{ a.perex }}</p>
          {% endif %}
            <div class="like-row">
  {% if session.get("username") %}
    <form method="post"
          action="{{ url_for('main.like_article', article_id=a.id) }}">
      <button type="submit"
              class="like-btn"
              title="Lajk">
        ♥
      </button>
    </form>
  {% else %}
    <span class="like-btn disabled" title="Přihlas se pro lajkování">
      ♥
    </span>
  {% endif %}

  <a class="like-count"
     href="{{ url_for('main.article_likes', article_id=a.id) }}">
    {{ a.like_count() }} lajků
  </a>
</div>

        </article>
      {% endfor %}
    </div>
  {% else %}
    <p class="empty">Zatím tu nejsou žádné články.</p>
  {% endif %}
</div>
{% endblock %}